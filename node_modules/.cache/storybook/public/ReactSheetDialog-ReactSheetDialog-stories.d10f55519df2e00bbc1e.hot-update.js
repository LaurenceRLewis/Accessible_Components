"use strict";
self["webpackHotUpdatetable_header_with_sub_header"]("ReactSheetDialog-ReactSheetDialog-stories",{

/***/ "./stories/ReactSheetDialog/ReactSheetDialog.js":
/*!******************************************************!*\
  !*** ./stories/ReactSheetDialog/ReactSheetDialog.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ "./node_modules/react/index.js");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react-dom */ "./node_modules/react-dom/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! classnames */ "./node_modules/classnames/index.js");
/* harmony import */ var classnames__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _SheetDialogContent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SheetDialogContent */ "./stories/ReactSheetDialog/SheetDialogContent.js");
/* harmony import */ var _StandardDialogContent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./StandardDialogContent */ "./stories/ReactSheetDialog/StandardDialogContent.js");
/* harmony import */ var _ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./ReactSheet.module.css */ "./stories/ReactSheetDialog/ReactSheet.module.css");
/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react/jsx-runtime */ "./node_modules/react/jsx-runtime.js");









function ReactSheetDialog(props) {
  // Declare state variable for sheet/dialog open state
  const [open, setOpen] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);
  // Destructure the modal and dialogType props
  const {
    modal,
    dialogType
  } = props;

  // Function to open the sheet/dialog
  const openSheet = () => {
    setOpen(true);
  };

  // Function to close the sheet/dialog
  const closeSheet = () => {
    setOpen(false);
  };

  //Esc key closes modal only
  // const handleEscKey = (event) => {
  //   if (event.key === "Escape" && open && modal) {
  //     closeSheet();
  //   }
  // };

  //Esc key closes modal and non-modal
  const handleEscKey = event => {
    if (event.key === "Escape" && open) {
      closeSheet();
    }
  };
  const isStandardDialog = dialogType === "standard";
  // Determine the sheet class based on the open state
  const sheetOpenClass = open ? _ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].open : "";
  // Determine if the overlay should be displayed
  const overlayClass = open && modal;
  // Combine sheet classes based on the dialog type
  const sheetStyle = classnames__WEBPACK_IMPORTED_MODULE_2___default()(_ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].sheet, {
    [_ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].standardDialog]: isStandardDialog,
    [_ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].sheetModal]: !isStandardDialog,
    [_ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].hidden]: !open
  }, sheetOpenClass);

  // Function to apply or remove 'aria-hidden' attribute on elements outside the dialog
  const setAriaHiddenOnSiblings = isOpen => {
    const rootNode = react_dom__WEBPACK_IMPORTED_MODULE_1__.findDOMNode(props.rootNode || document.body);
    const siblings = Array.from(rootNode.children).filter(child => child !== rootNode);
    siblings.forEach(sibling => {
      if (modal && isOpen) {
        sibling.setAttribute("aria-hidden", "true");
      } else {
        sibling.removeAttribute("aria-hidden");
      }
    });
  };

  // Add event listener for keydown events to handle Esc key press
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    window.addEventListener("keydown", handleEscKey);
    return () => {
      window.removeEventListener("keydown", handleEscKey);
    };
  }, [handleEscKey]);

  // Set focus on the sheet heading when the sheet/dialog opens
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (open) {
      document.getElementById("sheet-heading").focus();
    }
  }, [open]);

  // Add an effect to return focus to the triggering button when sheet/dialog is closed
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    if (!open) {
      const sideSheetButton = document.getElementById("side-sheet-button");
      if (sideSheetButton) {
        sideSheetButton.focus();
      }
    }
  }, [open]);

  // Apply or remove 'aria-hidden' attribute on elements outside the dialog when the modal is open or closed
  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {
    setAriaHiddenOnSiblings(open);
  }, [modal, open]);

  // Exit early if the sheet is closed or not a modal
  const trapFocus = event => {
    if (!open || !modal) {
      return;
    }

    // Check if the Tab key was pressed
    const isTabPressed = event.key === "Tab" || event.keyCode === 9;

    // Exit early if the pressed key is not Tab
    if (!isTabPressed) {
      return;
    }

    // Define the CSS selectors for focusable elements
    const focusableElements = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';
    const focusableContent = document.querySelectorAll(focusableElements);
    // Filter out any hidden elements from the list of focusable elements
    const trapElements = Array.from(focusableContent).filter(el => el.offsetParent !== null);

    // Identify the first and last focusable elements within the modal
    const firstTrapEl = trapElements[0];
    const lastTrapEl = trapElements[trapElements.length - 1];

    // Trap focus by moving focus to the last focusable element when
    // the Shift key is held down and the first element is focused
    if (event.shiftKey) {
      if (document.activeElement === firstTrapEl) {
        lastTrapEl.focus();
        event.preventDefault();
      }
      // Trap focus by moving focus to the first focusable element when
      // the last element is focused without the Shift key held down
    } else {
      if (document.activeElement === lastTrapEl) {
        firstTrapEl.focus();
        event.preventDefault();
      }
    }
  };
  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.Fragment, {
    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button", {
      onClick: openSheet,
      id: "side-sheet-button",
      className: _ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].sideSheetButton,
      children: "Open Sheet"
    }), overlayClass && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {
      className: _ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].overlay
    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {
      className: sheetStyle,
      role: "dialog",
      "aria-labelledby": "sheet-heading",
      ...(modal ? {
        "aria-modal": true
      } : {}),
      ...(open ? {} : {
        "aria-hidden": "true"
      }),
      onKeyDown: event => {
        trapFocus(event);
      },
      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div", {
        className: _ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].sheetHeader,
        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("h2", {
          id: "sheet-heading",
          className: _ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].sheetHeading,
          tabIndex: "-1",
          children: "Sheet Dialog"
        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button", {
          className: _ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].closeButton,
          onClick: closeSheet,
          children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("svg", {
            width: "24",
            height: "24",
            viewBox: "0 0 24 24",
            fill: "none",
            xmlns: "http://www.w3.org/2000/svg",
            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("path", {
              d: "M6 18L18 6M6 6L18 18",
              stroke: "#7B61C4",
              strokeWidth: "2",
              strokeLinecap: "round",
              strokeLinejoin: "round"
            })
          })
        })]
      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div", {
        className: `${_ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].sheetContent} ${_ReactSheet_module_css__WEBPACK_IMPORTED_MODULE_5__["default"].contentContainer}`,
        tabIndex: 0,
        children: isStandardDialog ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_StandardDialogContent__WEBPACK_IMPORTED_MODULE_4__["default"], {}) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_SheetDialogContent__WEBPACK_IMPORTED_MODULE_3__["default"], {})
      })]
    })]
  });
}
ReactSheetDialog.__docgenInfo = {
  "description": "",
  "methods": [],
  "displayName": "ReactSheetDialog"
};
/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (ReactSheetDialog);

/***/ })

});
//# sourceMappingURL=ReactSheetDialog-ReactSheetDialog-stories.d10f55519df2e00bbc1e.hot-update.js.map