{"version":3,"file":"ReactCombobox-ReactCombobox-stories.c8ca9bccc33a5a1fa35b.hot-update.js","mappings":";;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AAAA;AAAA;AAEA;AAEA;AAAA;AAAA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAIA;AACA;AACA;AAAA;AAIA;AACA;AAIA;AACA;AACA;AAAA;AAEA;AAEA;AAEA;AAGA;AAzHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA2HA","sources":["webpack://table---header-with-sub-header/./stories/ReactCombobox/ReactCombobox.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport ariaAnnounce from \"../../.storybook/utils/ariaAnnounce\";\nimport { townsAndCities } from \"./ReactComboboxData\";\nimport styles from \"./ReactCombobox.module.css\";\n\nconst ReactCombobox = ({ autocomplete = \"list\" }) => {\n  const [inputValue, setInputValue] = useState(\"\");\n  const [selectedIndex, setSelectedIndex] = useState(-1);\n  const [showOptions, setShowOptions] = useState(false);\n  const [options, setOptions] = useState(townsAndCities);\n  const [resultCount, setResultCount] = useState(0);\n  const inputRef = useRef(null);\n\n  useEffect(() => {\n    if (autocomplete === \"list\" || autocomplete === \"both\") {\n      const filteredOptions = townsAndCities.filter((city) =>\n        city.toLowerCase().startsWith(inputValue.toLowerCase())\n      );\n      setOptions(filteredOptions);\n      setResultCount(filteredOptions.length);\n    }\n  }, [inputValue, autocomplete]);\n\n  useEffect(() => {\n    if (showOptions) {\n      ariaAnnounce(`${resultCount} of ${townsAndCities.length} results found`);\n    }\n  }, [showOptions, resultCount]);\n\n  const handleOptionClick = (value) => {\n    setInputValue(value);\n    setShowOptions(false);\n    setSelectedIndex(-1);\n    ariaAnnounce(`Selected ${value}`);\n  };\n\n  const handleInputChange = (event) => {\n    const { value } = event.target;\n    setInputValue(value);\n    if (value === \"\") {\n      setShowOptions(false);\n      setOptions(townsAndCities);\n      setResultCount(townsAndCities.length);\n      return;\n    }\n    const filteredOptions = townsAndCities.filter((city) =>\n      city.toLowerCase().startsWith(value.toLowerCase())\n    );\n    setOptions(filteredOptions);\n    setResultCount(filteredOptions.length);\n    setShowOptions(true);\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === \"ArrowDown\" && selectedIndex < options.length - 1) {\n      setSelectedIndex(selectedIndex + 1);\n    } else if (e.key === \"ArrowUp\" && selectedIndex > 0) {\n      setSelectedIndex(selectedIndex - 1);\n    } else if (e.key === \"Enter\" && selectedIndex !== -1) {\n      setInputValue(options[selectedIndex]);\n      setSelectedIndex(-1);\n      setShowOptions(false);\n    } else if (e.key === \"Escape\") {\n      if (showOptions) {\n        setShowOptions(false);\n      } else {\n        setInputValue(\"\");\n      }\n    }\n  };\n\n  return (\n    <div className={styles[\"comboboxContainer\"]}>\n      <label id=\"combobox-label\" htmlFor=\"combobox-input\">\n        Australian cities and towns\n      </label>\n      <p id=\"help-text\" className={styles[\"helpText\"]}>\n        Help text\n      </p>\n      {showOptions && (\n        <p id=\"result-count\" className={styles[\"resultCount\"]}>\n          {`${resultCount} of ${townsAndCities.length} results found`}\n        </p>\n      )}\n      <input\n        id=\"combobox-input\"\n        className={styles[\"comboboxInput\"]}\n        role=\"combobox\"\n        aria-autocomplete={autocomplete}\n        autocomplete=\"off\"\n        aria-controls=\"combobox-listbox\"\n        aria-activedescendant={\n          selectedIndex === -1 ? \"\" : `option-${selectedIndex}`\n        }\n        aria-expanded={showOptions}\n        aria-labelledby=\"combobox-label\"\n        ref={inputRef}\n        type=\"text\"\n        value={inputValue}\n        onChange={handleInputChange}\n        onKeyDown={handleKeyPress}\n      />\n      {showOptions && (\n        <ul\n          id=\"combobox-listbox\"\n          className={styles[\"comboboxListbox\"]}\n          role=\"listbox\"\n        >\n          {options.map((option, index) => (\n            <li\n              id={`option-${index}`}\n              className={\n                index === selectedIndex ? styles[\"selectedOption\"] : \"\"\n              }\n              key={option}\n              role=\"option\"\n              aria-selected={index === selectedIndex}\n              onClick={() => handleOptionClick(option)}\n            >\n              {option}\n            </li>\n          ))}\n        </ul>\n      )}\n    </div>\n  );\n};\n\nexport default ReactCombobox;"],"names":[],"sourceRoot":""}